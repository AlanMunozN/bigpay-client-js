{"version":3,"sources":["../../../src/common/http-request/payload-transformer.js"],"names":["PayloadTransformer","data","contentType","JSON","stringify","xhr","getResponseHeader","status","statusText","response","responseText","parse"],"mappings":";;;;;;;;AAAA;;AACA;;;;IAEqBA,kB;;;;;;;;;AAQjB;;;;;kCAKUC,I,EAAsC;AAAA,gBAAhCC,WAAgC;;AAC5C,gBAAID,QAAQ,qBAASC,WAAT,iCAAZ,EAAqD;AACjD,uBAAOC,KAAKC,SAAL,CAAeH,IAAf,CAAP;AACH;;AAED,mBAAOA,IAAP;AACH;;AAED;;;;;;;;;;qCAOaI,G,EAAK;AACd,gBAAMH,cAAcG,IAAIC,iBAAJ,CAAsB,cAAtB,CAApB;AADc,gBAENC,MAFM,GAEiBF,GAFjB,CAENE,MAFM;AAAA,gBAEEC,UAFF,GAEiBH,GAFjB,CAEEG,UAFF;;;AAId,gBAAIP,OAAO,cAAcI,GAAd,GAAoBA,IAAII,QAAxB,GAAmCJ,IAAIK,YAAlD;;AAEA,gBAAIT,QAAQ,qBAASC,WAAT,iCAAZ,EAAqD;AACjDD,uBAAOE,KAAKQ,KAAL,CAAWV,IAAX,CAAP;AACH;;AAED,mBAAO,EAAEA,UAAF,EAAQM,cAAR,EAAgBC,sBAAhB,EAAP;AACH;;;;AAtCD;;;iCAGgB;AACZ,mBAAO,IAAIR,kBAAJ,EAAP;AACH;;;;;;kBANgBA,kB","file":"payload-transformer.js","sourcesContent":["import { APPLICATION_JSON } from './content-types';\nimport { includes } from '../utils';\n\nexport default class PayloadTransformer {\n    /**\n     * @returns {PayloadTransformer}\n     */\n    static create() {\n        return new PayloadTransformer();\n    }\n\n    /**\n     * @param {Object} data\n     * @param {string} [contentType = APPLICATION_JSON]\n     * @returns {Object}\n     */\n    toRequest(data, contentType = APPLICATION_JSON) {\n        if (data && includes(contentType, APPLICATION_JSON)) {\n            return JSON.stringify(data);\n        }\n\n        return data;\n    }\n\n    /**\n     * @param {XMLHttpRequest} xhr\n     * @returns {Object}\n     * @property {Object} data\n     * @property {number} status\n     * @property {string} statusText\n     */\n    fromResponse(xhr) {\n        const contentType = xhr.getResponseHeader('Content-Type');\n        const { status, statusText } = xhr;\n\n        let data = 'response' in xhr ? xhr.response : xhr.responseText;\n\n        if (data && includes(contentType, APPLICATION_JSON)) {\n            data = JSON.parse(data);\n        }\n\n        return { data, status, statusText };\n    }\n}\n"]}