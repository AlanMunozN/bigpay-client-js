{"version":3,"sources":["../../../../src/payment/v1/payment-mappers/order-mapper.js"],"names":["OrderMapper","data","order","billing_address","mapToBillingAddress","currency","id","orderId","items","mapToItems","shipping_address","mapToShippingAddress","token","totals","mapToOrderTotals","customer","address","mapToAddress","email","addressKey","city","company","country_code","countryCode","country","first_name","firstName","last_name","lastName","phone","state_code","provinceCode","state","province","street_1","addressLine1","street_2","addressLine2","zip","postCode","cart","map","code","itemData","name","price","integerAmount","quantity","sku","grand_total","grandTotal","handling","shipping","subtotal","tax","taxTotal"],"mappings":"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","file":"order-mapper.js","sourcesContent":["import { omitNil, toString } from '../../../common/utils';\n\nexport default class OrderMapper {\n    /**\n     * @returns {OrderMapper}\n     */\n    static create() {\n        return new OrderMapper();\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToOrder(data) {\n        const { order = {} } = data;\n\n        return omitNil({\n            billing_address: this.mapToBillingAddress(data),\n            currency: order.currency,\n            id: order.orderId ? toString(order.orderId) : null,\n            items: this.mapToItems(data),\n            shipping_address: this.mapToShippingAddress(data),\n            token: order.token,\n            totals: this.mapToOrderTotals(data),\n        });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToBillingAddress(data) {\n        const { customer = {} } = data;\n        const address = this.mapToAddress(data, 'billingAddress');\n\n        if (customer.email) {\n            address.email = customer.email;\n        }\n\n        return address;\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToShippingAddress(data) {\n        return this.mapToAddress(data, 'shippingAddress');\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @param {string} addressKey\n     * @returns {Object}\n     */\n    mapToAddress(data, addressKey) {\n        const address = data[addressKey] || {};\n\n        return omitNil({\n            city: address.city,\n            company: address.company,\n            country_code: address.countryCode,\n            country: address.country,\n            first_name: address.firstName,\n            last_name: address.lastName,\n            phone: address.phone,\n            state_code: address.provinceCode,\n            state: address.province,\n            street_1: address.addressLine1,\n            street_2: address.addressLine2,\n            zip: address.postCode,\n        });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToItems(data) {\n        const { cart = { items: [] } } = data;\n\n        return cart.items.map(itemData => omitNil({\n            code: itemData.id,\n            name: itemData.name,\n            price: itemData.integerAmount,\n            quantity: itemData.quantity,\n            sku: itemData.sku,\n        }));\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToOrderTotals(data) {\n        const { order = {} } = data;\n\n        return omitNil({\n            grand_total: order.grandTotal ? order.grandTotal.integerAmount : null,\n            handling: order.handling ? order.handling.integerAmount : null,\n            shipping: order.shipping ? order.shipping.integerAmount : null,\n            subtotal: order.subtotal ? order.subtotal.integerAmount : null,\n            tax: order.taxTotal ? order.taxTotal.integerAmount : null,\n        });\n    }\n}\n"]}